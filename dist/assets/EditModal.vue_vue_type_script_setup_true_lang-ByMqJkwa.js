import{d as U,r as b,A as M,f as u,w as o,b as s,a as _,c as N,s as T,F as Y,e as A,g as F,h as V,m,o as d}from"./index-BrLrKHRe.js";const L={class:"dialog-footer"},j=U({__name:"EditModal",props:{visible:{type:Boolean,default:!1},table:{},tableInfo:{},data:{}},emits:["update:visible","close","confirm","delete"],setup(w,{emit:k}){const n=k,a=w,r=b(!1),c=b({}),e=b({}),g=async()=>{c.value=await m.getTableInfo(a.table),c.value.rows.forEach(p=>{e.value[p.name]=a.data[p.name]})},y=()=>{n("update:visible",!1),n("close",!1)},C=async()=>{e.value.id?await m.updateDataItem(a.table,e.value):await m.addDataItem(a.table,e.value),n("update:visible",!1),n("confirm")},I=async()=>{await m.deleteDataItem(a.table,e.value.id),n("update:visible",!1),n("delete")};return M(()=>a.visible,()=>{r.value=a.visible,a.visible&&g()}),(p,l)=>{const D=s("el-date-picker"),x=s("el-input"),h=s("el-form-item"),B=s("el-form"),f=s("el-button"),E=s("el-dialog");return d(),u(E,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=i=>r.value=i),title:"数据管理",width:"75%","before-close":y},{footer:o(()=>[A("div",L,[e.value.id?(d(),u(f,{key:0,type:"danger",onClick:I},{default:o(()=>l[1]||(l[1]=[V("删除")])),_:1})):F("",!0),_(f,{onClick:y},{default:o(()=>l[2]||(l[2]=[V("取消")])),_:1}),_(f,{type:"primary",onClick:C},{default:o(()=>l[3]||(l[3]=[V(" 确定 ")])),_:1})])]),default:o(()=>[_(B,{model:e.value,"label-width":"auto",style:{"max-width":"600px"}},{default:o(()=>{var i;return[(d(!0),N(Y,null,T((i=c.value)==null?void 0:i.rows,t=>(d(),u(h,{label:t.column||t.name},{default:o(()=>[t.type==="DATETIME"?(d(),u(D,{key:0,modelValue:e.value[t.name],"onUpdate:modelValue":v=>e.value[t.name]=v,type:"date","value-format":"YYYY-MM-DD",placeholder:"选择时间",clearable:""},null,8,["modelValue","onUpdate:modelValue"])):(d(),u(x,{key:1,modelValue:e.value[t.name],"onUpdate:modelValue":v=>e.value[t.name]=v,disabled:t.name==="id",clearable:""},null,8,["modelValue","onUpdate:modelValue","disabled"]))]),_:2},1032,["label"]))),256))]}),_:1},8,["model"])]),_:1},8,["modelValue"])}}});export{j as _};
